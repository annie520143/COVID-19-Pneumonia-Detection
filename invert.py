#%%
import time
from PIL import Image, ImageStat, ImageOps
import cv2
import os
import pandas as pd
import numpy as np
'''
這部分的為圖片前處理，會將 train 的檔案處理完後分成 NORMAL PNEUMONIA COVID 放入對應的資料夾
然後 valid 處理完則是放入 VALID 的資料夾
以 VALID 為例 : VALID 為黑白圖 ，VALID1 為黑白圖搭配標示，VALID2 為單獨只有肺部圖片
'''
valid_data = ["0f30ecaf1e42.png",
"3acb673adc77.png",
"4a4c08b4af92.png",
"4c9c27d3ba62.png",
"05e002867b16.png",
"5c080f4f5c1c.png",
"6a5fdd339e48.png",
"8a5a0be68a86.png",
"10f24f3f46cc.png",
"28ed5ad7aa44.png",
"29d56e8eb7d5.png",
"46c2b84d6a32.png",
"60b049cb055b.png",
"601a763ea68c.png",
"84a0999016dc.png",
"88cadf427067.png",
"189dc098ce02.png",
"278c9d5d67a6.png",
"383c177fdfa3.png",
"469f81a0a495.png",
"ec48a6526a03.png",
"ecdc65d0576f.png",
"fd0516801814.png",
"86257b941a8d.png",
"52078709c33c.png",
"a0f60ed119f5.png",
"a1b50b5af171.png",
"a2a86dab3c23.png",
"a71cc4a58f2b.png",
"adcde3990123.png",
"b4cab73348f4.png",
"b9b3b3d053e8.png",
"b896140a38fc.png",
"c7b2d78c0172.png",
"cf9186ecd1d6.png",
"d064ab574ab5.png",
"df76e37678fc.png",
"e5a4b11b4324.png",
"e7844d73ef73.png"]

pneumonia_data = ["8b83a6d160fc.png",
"8e87b08b74a9.png",
"0a28416f1cc2.png",
"0ae01c5ae6e1.png",
"0ed210933fc8.png",
"1baf69fe407a.png",
"1c76f2d44957.png",
"1e00e85ccc9c.png",
"2ae1cb316ed3.png",
"2b888b6f9b1d.png",
"2f35725034c0.png",
"2fd932e390cd.png",
"3e28ed6b86c7.png",
"3f1e8e12a2b1.png",
"4cd76a6ffd02.png",
"4d19f5e7da5b.png",
"4e329586489a.png",
"5a92f8b0a3dd.png",
"5b93c9f94da0.png",
"7c867440f99d.png",
"231e0478856c.png",
"309a6770492b.png",
"334e6e260869.png",
"20dd0d8ab128.png",
"25ac62331472.png",
"29bd85cb2d0f.png",
"30c35ea10f49.png",
"35bbba0d5e94.png",
"38b6e55f1557.png",
"43ef2bc2ee11.png",
"58cdb82fe8e8.png",
"62d8ffa9d571.png",
"68b053842ca6.png",
"68c1778254d9.png",
"68da57d13a2b.png",
"82c538e42cf3.png",
"85a4565bbb54.png",
"95f001b6fdbb.png",
"219e45f80194.png",
"69266c11c44d.png",
"077932b1655d.png",
"93458c058c95.png",
"513a3b9a8040.png",
"531df9edb6a8.png",
"623dd0acd15c.png",
"791fde704a29.png",
"851bbbdf918b.png",
"921f26924c91.png",
"958d52197ae4.png",
"2989dd58ce5c.png",
"5552bb35e470.png",
"5819decd77cc.png",
"6220b0c63d8c.png",
"7164c35fd355.png",
"7650ebdd1d6b.png",
"7657ed524255.png",
"11457e04b38d.png",
"d3b2b20b10d0.png",
"d8ba6ff31c68.png",
"d37d697a3812.png",
"da7d3878d99a.png",
"da970a6b5ce3.png",
"daf656d29ed8.png",
"db004c7fb3f6.png",
"312672d5d696.png",
"462466e3d056.png",
"558665a9d2f0.png",
"720603d036d5.png",
"253804882dd5.png",
"299706239bbd.png",
"1868493281cc.png",
"a75d3574deb7.png",
"a311a6dcb1d6.png",
"a480c9aa030d.png",
"a4158ab717d4.png",
"a4694b0c94da.png",
"ac6a663d63b6.png",
"b03bdb1cb742.png",
"b571da81f1d9.png",
"b69863a3f5a6.png",
"b9019551ee25.png",
"bd40ba0651a0.png",
"bd6854b1a5c2.png",
"be95d4b23489.png",
"bf0d47843ac7.png",
"c41532a41eba.png",
"c89690bfc9ce.png",
"cc833d0f2596.png",
"cc6266aff603.png",
"cdb6e4fa4723.png",
"d0f417d144d0.png",
"e0209b7fda99.png",
"e576f1051ea0.png",
"e379395b77e8.png",
"e691033f8c84.png",
"ed3e5d37aa26.png",
"f4fe016e0b7b.png",
"f6c8061c8093.png",
"f21f4f4ed6c9.png",
"f24775b51def.png",
"fd86f4b94591.png",
"fec17eaa2918.png",
"dc68d24dc07c.png",
"de970e5ec98f.png",
"df44f70102f0.png",
"e5e3d73a2935.png",
"e18b0660a6f6.png"]


normal_data = ["8fec6ce28656.png",
"9f459509f116.png",
"12f23f1a18b7.png",
"25ae30460214.png",
"48e9e7276893.png",
"50bbf08795f3.png",
"55da6420303e.png",
"0d7e63af0f4a.png",
"0dd367d8652f.png",
"1ec4421d2cce.png",
"2a10a5060144.png",
"2a33da4b796c.png",
"2b743384e49c.png",
"2bf7382c84e3.png",
"2cc9158963cd.png",
"2d5316f7ca6c.png",
"2ea1270a0b60.png",
"03f9dafeb772.png",
"3a4d04e40bb4.png",
"3d786953c848.png",
"3db128d49211.png",
"5a27c8d8637b.png",
"5a3754dc7c71.png",
"5e251a6d1973.png",
"5f16b0b520ab.png",
"6e3205ab90d6.png",
"7d1ac80204f7.png",
"8e192d41e836.png",
"7026b505342b.png",
"64e84cfdc3b5.png",
"66c005065d07.png",
"76c3add29f90.png",
"77ef3e041e68.png",
"81cfa4fc56e8.png",
"98c3f1a175ff.png",
"381df27fb5e1.png",
"478db716024f.png",
"600ee2e833a5.png",
"720e19572a40.png",
"721a3445709e.png",
"857f2936e592.png",
"923a66e21a48.png",
"987ddc77cb3c.png",
"5622ee42578c.png",
"f4c04819ff43.png",
"f5d234298fb8.png",
"f39bb2481231.png",
"f76f7e00cc0d.png",
"f86b9957f5fa.png",
"f358d9322b4b.png",
"f742f40e9f5c.png",
"f4318ea293e8.png",
"8550b65b6374.png",
"53203a6445f8.png",
"54034d388e39.png",
"54222fbd8cf5.png",
"55081ad65f6d.png",
"60918f10438d.png",
"70713f86861e.png",
"86990dfb2b78.png",
"100112a293e7.png",
"397474bf7e38.png",
"664705d3f563.png",
"2072083d7ad2.png",
"4211806c578e.png",
"034247332fec.png",
"a2b8bffa2202.png",
"a4db459a5061.png",
"a8cb8496b0da.png",
"a8e4eff08d21.png",
"a59ac2f32f58.png",
"a93081c7a191.png",
"ae40c5b08a42.png",
"b9279c20e03d.png",
"bfe63239a0f6.png",
"c17c60e6f3f6.png",
"c84cb2c290a6.png",
"c0087d0a5eab.png",
"c0263bcbd7b7.png",
"c345b59a87fe.png",
"c478b7d3b3c0.png",
"ce9d9ef08672.png",
"d90c38dfee72.png",
"d824f88a9fff.png",
"e70f7d85ab5f.png",
"e90cd0036633.png",
"eb0807e1f55b.png",
"f0a7f8020210.png",
"f0fd42f5f6e2.png",
"fd150d5066b0.png",
"fdbf3d1d4447.png",
"fdf856c9932b.png",
"ff4bb769d114.png",
"f095043d4348.png",
"fa07e89fbc00.png",
"fc41d6a93c66.png"]


covid_data = ["01ef587469f2.png",
"1c643d4c7905.png",
"00e0ce73dac8.png",
"0a872040c667.png",
"0d2776fe4bfd.png",
"0ebe74c58508.png",
"2c7062c47847.png",
"1d4fb8d74677.png",
"1e31a8509671.png",
"1fd149b84bdc.png",
"5eee804b5a23.png",
"3e6005be4541.png",
"3e667470fe24.png",
"3e946496614c.png",
"4f2f8d2c54e5.png",
"4ff8dab4a023.png",
"05d206f55c08.png",
"5c226a1f5c66.png",
"5cb2a13a7376.png",
"7f074c12204b.png",
"6c86a8037c2a.png",
"6f6ac981b372.png",
"7a7da31f5b18.png",
"7a81a25719d6.png",
"7ba42d51bee5.png",
"7df46d28acd1.png",
"7e7daf758083.png",
"295c1b48268d.png",
"8f1287a52bd3.png",
"9c5d603f903f.png",
"9cfd72108bc8.png",
"11f6e9aa570b.png",
"26dc4cae9121.png",
"30ae5ff83e30.png",
"047c9f2551e7.png",
"53dc9a4a8f05.png",
"74c39d077667.png",
"74f81d85da32.png",
"77ec95010071.png",
"117fb46f5fd4.png",
"221b5942c730.png",
"8973f74667b0.png",
"381b092504a4.png",
"386b62dad37b.png",
"621fc1d24694.png",
"837a2052659e.png",
"859c4b58f278.png",
"977b9156e041.png",
"4474a282c902.png",
"4596a805a3cd.png",
"6690ceea4c82.png",
"8002f026b1fb.png",
"8763ab919ff2.png",
"8815f181431a.png",
"a68fb156830f.png",
"a104fcb08715.png",
"a513af4376be.png",
"10671b1b92de.png",
"018861e85a54.png",
"34166ad76cf0.png",
"45449b6b7924.png",
"55942cc41773.png",
"069071ca5e7d.png",
"5818093bd2c6.png",
"63127597df86.png",
"063630809dc2.png",
"a3df20af147b.png",
"c83020c63483.png",
"cb7dc5b505f1.png",
"a614cc55e1a6.png",
"a899ab6e4a03.png",
"a942ecd8132c.png",
"a0976978b70b.png",
"a3651203024c.png",
"ad5c75cf05f1.png",
"ae5b018a11f6.png",
"bc5106e95989.png",
"bfb854e22020.png",
"c6f7a14c1f9e.png",
"c9f5be942831.png",
"c979c16c096a.png",
"fd4452991452.png",
"d3a74022c232.png",
"d60f33991d05.png",
"d220a15c26fb.png",
"d224d05c2afd.png",
"df383caf6c32.png",
"e028a8d54730.png",
"ec85bb21c606.png",
"ec70987ce5ab.png",
"ef9fbea53076.png",
"f25edfe2514d.png",
"f682dd5bb066.png",
"f709c778c784.png",
"f715c3af5717.png",
"f864d945a829.png",
"fb10256c207c.png"]

valid_data_path = 'COVID/'

savepath = "COVID_invert/"
for filename in valid_data:
    image = Image.open(valid_data_path + filename)
    image = ImageOps.invert(image)
    image.save(savepath + filename)